/*

  All code by @99TheDark unless noted. (See Credits.md)
  
  Minified with Toptal.

*/

var Dark=function(t=!1){let e=performance.now(),r=performance.now(),n=-1,i=this,a=Dark.constants;for(let o in Dark.instances.push(i),i.settings={},i.transforms=[],i.vertices=[],i.vertexCache=[],i.objects=Dark.objects,i.copy=Dark.copy,i.format=Dark.format,a=i.constants=Dark.constants,i.dummy=t,Dark.variables)i[o]=Dark.variables[o];i.isMain=!1;let s=Math.floor(1e9*Math.random()).toString(36),l=document.createElement("canvas");l.id="DarkJS-default-canvas-"+s,l.style.position="absolute",l.style.inset="0px",l.style.top="0px",l.style.left="0px",l.width=innerWidth,l.height=innerHeight,i.defaultCanvas=l,i.canvas=l,i.ctx=l.getContext("2d",Dark.defaultContextSettings),Dark.empties.forEach(t=>i[t]=()=>{});var c=function(t){return i.settings.angleMode==a.DEGREES?t*a.PI/180:t},u=function(t){i.vertices.push(t),t.points.forEach(t=>i.vertexCache.push(new DVector(t.x,t.y)))},h=function(){i.canvas.addEventListener("mousedown",function(t){t.preventDefault(),i.mouseIsPressed=!0,i.mouseButton=Dark.mouseMap[t.button],i.mousePressed()}),i.canvas.addEventListener("mouseup",function(t){t.preventDefault(),i.mouseButton=void 0,i.mouseIsPressed=!1,i.mouseReleased()}),i.canvas.addEventListener("mouseenter",function(t){t.preventDefault(),i.mouseIsInside=!0,i.mouseIn()}),i.canvas.addEventListener("mouseleave",function(t){i.mouseIsInside=!1,t.preventDefault(),i.mouseOut()}),i.canvas.addEventListener("mousemove",function(t){t.preventDefault();let e=t.target.getBoundingClientRect();i.pmouseX=i.pmouse.x=i.mouseX,i.pmouseY=i.pmouse.y=i.mouseY,i.mouseX=i.mouse.x=i.constrain(i.round(t.pageX-e.x),0,width),i.mouseY=i.mouse.y=i.constrain(i.round(t.pageY-e.y),0,height),i.mouseMoved()}),i.canvas.addEventListener("wheel",function(t){t.preventDefault(),i.mouseScrolled()}),i.canvas.addEventListener("dblclick",function(t){t.preventDefault(),i.mouseDoubleClicked()})},f=function(t){return"rgba("+i.red(t)+", "+i.green(t)+", "+i.blue(t)+", "+i.alpha(t)/255+")"};!function(t){for(let e in t)i[e]=t[e]}({size:function(t=innerWidth,e=innerHeight){if("number"==typeof t&&"number"==typeof e&&t>0&&e>0){let r=i.copy(i.ctx);[i.width,i.height]=[i.canvas.width,i.canvas.height]=[t,e];let n=["canvas","width","height"];for(let a in i.ctx){let o=r[a];"function"==typeof o||n.includes(a)||(i.ctx[a]=o)}Dark.globallyUpdateVariables(i)}},setCanvas:function(t){if(t instanceof HTMLCanvasElement){i.canvas=t,i.width=t.width,i.height=t.height;let e=copy(i.ctx);for(let r in i.ctx=t.getContext("2d",Dark.defaultContextSettings),i.ctx){let n=e[r];"canvas"!==r&&"function"!=typeof n&&(i.ctx[r]=n)}i.canvas.style.cursor=i.settings.cursor,i.canvas.tabIndex="1",h()}},getCanvas:function(){return i.canvas},getContext:function(){return i.ctx},setTitle:function(t){document.title=t},dist:function(...t){let e,r;return t.length=6,e=t[2]-t[0],r=t[3]-t[1],i.sqrt(e*e+r*r+0)},gamma:function(t){return i.sqrt(a.TAU/t)*((t+1/(12*t+1/(10*t)))/E)**t},factorial:function(t){return Number.isInteger(t)?intFactorial(t):gamma(t+1)},intFactorial:function(t){let e=t=i.floor(t);for(;--t>1;)e*=t;return e},choose:function(t,e){return intFactorial(t)/(intFactorial(t-e)*intFactorial(e))},random:function(...t){switch(t.length){default:return Math.random()*(t[1]-t[0])+t[0];case 0:return Math.random();case 1:return Math.random()*t[0]}},cursor:function(t="default"){i.settings.cursor=t,i.canvas.style.cursor=t},noCursor:function(){i.settings.cursor="none",i.canvas.style.cursor="none"},loop:function(){i.settings.looping=!0},noLoop:function(){i.settings.looping=!1},frameRate:function(t){i.settings.frameStep=1e3/t},enableContextMenu:function(){i.settings.contextMenu=!0,i.canvas.oncontextmenu=!0},disableContextMenu:function(){i.settings.contextMenu=!1,i.canvas.oncontextmenu=!1},color:function(t,e,r,n){if(1==arguments.length){if(!(t<=255)||!(t>=0))return t;r=e=t}return 2==arguments.length&&(n=e,e=t,r=t),n||(n=255),t=i.constrain(t,0,255),e=i.constrain(e,0,255),r=i.constrain(r,0,255),((n=i.constrain(n,0,255))<<24)+(t<<16)+(e<<8)+r},randomColor:function(){return color(255*Math.random(),255*Math.random(),255*Math.random())},red:t=>t>>16&255,green:t=>t>>8&255,blue:t=>255&t,alpha:t=>t>>24&255,lerpColor:function(t,e,r){return color(i.lerp(i.red(t),i.red(e),r),i.lerp(i.green(t),i.green(e),r),i.lerp(i.blue(t),i.blue(e),r),i.lerp(i.alpha(t),i.alpha(e),r))},fill:function(...t){let e=i.settings.fill=i.color.apply(null,t);i.ctx.fillStyle=f(e)},noFill:function(){i.settings.fill=0,i.ctx.fillStyle="rgba(0, 0, 0, 0)"},stroke:function(...t){let e=i.settings.stroke=i.color.apply(null,t);i.ctx.strokeStyle=f(e)},noStroke:function(){i.settings.stroke=0,i.ctx.strokeStyle="rgba(0, 0, 0, 0)"},background:function(...t){i.ctx.save(),i.ctx.resetTransform();let e=i.color.apply(null,t);i.ctx.fillStyle=f(e),i.ctx.fillRect(0,0,i.width,i.height),i.ctx.restore()},clear:function(){i.ctx.save(),i.ctx.resetTransform(),i.ctx.clearRect(0,0,i.width,i.height),i.ctx.restore()},strokeCap:function(t){switch(t){default:Dark.error(Error("Invalid strokeCap type"));break;case a.FLAT:i.ctx.lineCap="butt",i.settings.strokeCap=a.FLAT;break;case a.ROUND:i.ctx.lineCap="round",i.settings.strokeCap=a.ROUND;break;case a.SQUARE:i.ctx.lineCap="square",i.settings.strokeCap=a.SQUARE}},strokeJoin:function(t=a.MITER){switch(t){default:Dark.error(Error("Invalid strokeJoin type"));break;case a.MITER:i.ctx.lineJoin="miter",i.settings.strokeJoin=a.MITER;break;case a.BEVEL:i.ctx.lineJoin="bevel",i.settings.strokeJoin=a.BEVEL;break;case a.ROUND:i.ctx.lineJoin="round",i.settings.strokeJoin=a.ROUND}},strokeWeight:function(t){i.settings.strokeWeight=t,i.ctx.lineWidth=t},smooth:function(){i.settings.smoothing=!0,i.ctx.imageSmoothingEnabled=!0,i.ctx.imageSmoothingQuality="high"},noSmooth:function(){i.settings.smoothing=!0,i.ctx.imageSmoothingEnabled=!1,i.ctx.imageSmoothingQuality="low"},angleMode:function(t){switch(t){default:Dark.error(Error("Invalid angleMode type"));break;case a.DEGREES:i.settings.angleMode=a.DEGREES;break;case a.RADIANS:i.settings.angleMode=a.RADIANS}},ellipseMode:function(t=a.CENTER){i.settings.ellipseMode=t},rectMode:function(t=a.CORNER){i.settings.rectMode=t},imageMode:function(t=a.CORNER){i.settings.imageMode=t},curveTightness:function(t=0){i.settings.curveTightness=t},pushMatrix:function(){i.transforms.length>i.maxTransforms?Dark.error(Error("Maximum matrix stack size reached, pushMatrix() called "+i.maxTransforms+" times.")):i.transforms.push(i.ctx.getTransform())},popMatrix:function(){let t=i.transforms.pop();t?i.ctx.setTransform(t):Dark.error(Error("No more transforms to restore in popMatrix"))},resetMatrix:function(){i.transforms.length=0,i.ctx.resetTransform()},push:function(){i.ctx.save()},pop:function(){i.ctx.restore()},reset:function(){i.ctx.reset()},translate:function(t,e){i.ctx.translate(t,e)},rotate:function(t){i.ctx.rotate(c(t))},scale:function(t,e){arguments.length<2?i.ctx.scale(t,t):i.ctx.scale(t,e)},skew:function(t,e=0){let r=i.ctx.getTransform();r.b=.01*e,r.c=.01*t,i.ctx.setTransform(r)},rect:function(t,e,r,n,o,s,l,c){switch(r=Math.abs(r),n=Math.abs(n),i.ctx.beginPath(),i.ctx.save(),i.settings.rectMode==a.CENTER&&i.ctx.translate(-r/2,-n/2),arguments.length){default:Dark.error(Error("rect takes in 4, 5 or 8 parameters, not "+arguments.length));break;case 4:i.ctx.rect(t,e,r,n);break;case 5:i.ctx.roundRect(t,e,r,n,o);break;case 6:i.ctx.roundRect(t,e,r,n,[o,s,l,c])}i.ctx.fill(),i.ctx.stroke(),i.ctx.restore()},ellipse:function(t,e,r,n){r=Math.abs(r),n=Math.abs(n),i.ctx.beginPath(),i.ctx.save(),i.settings.ellipseMode==a.CORNER&&i.ctx.translate(r/2,n/2),i.ctx.beginPath(),i.ctx.ellipse(t,e,r/2,n/2,0,0,a.TAU,!1),i.ctx.fill(),i.ctx.stroke(),i.ctx.restore()},arc:function(t,e,r,n,o,s){i.ctx.save(),i.settings.ellipseMode==a.CORNER&&i.ctx.translate(r/2,n/2),i.ctx.beginPath(),i.ctx.ellipse(t,e,r/2,n/2,0,o,s,!1),i.ctx.fill(),i.ctx.stroke(),i.ctx.restore()},line:function(t,e,r,n){i.ctx.beginPath(),i.ctx.moveTo(t,e),i.ctx.lineTo(r,n),i.ctx.stroke()},point:function(t,e){i.ctx.save(),i.ctx.beginPath(),i.ctx.fillStyle=f(i.settings.stroke),i.ctx.arc(t,e,i.settings.strokeWeight/2,0,a.TAU),i.ctx.fill(),i.ctx.restore()},circle:function(t,e,r){i.ctx.save(),i.settings.ellipseMode==a.CORNER&&i.ctx.translate(r,r),i.ctx.beginPath(),i.ctx.arc(t,e,r,0,a.TAU),i.ctx.fill(),i.ctx.stroke(),i.ctx.restore()},square:function(t,e,r){rect(t,e,r,r)},triangle:function(t,e,r,n,a,o){i.ctx.beginPath(),i.ctx.moveTo(t,e),i.ctx.lineTo(r,n),i.ctx.lineTo(a,o),i.ctx.closePath(),i.ctx.fill(),i.ctx.stroke()},quad:function(t,e,r,n,a,o,s,l){i.ctx.beginPath(),i.ctx.moveTo(t,e),i.ctx.lineTo(r,n),i.ctx.lineTo(a,o),i.ctx.lineTo(s,l),i.ctx.closePath(),i.ctx.fill(),i.ctx.stroke()},beginShape:function(){i.vertices.length=0,i.vertexCache.length=0},endShape:function(t=a.OPEN){i.vertices.length<2||i.vertices[0].type==a.BEZIER||(i.ctx.beginPath(),i.vertices.forEach(function(t,e){if(0==e)i.ctx.moveTo(t.points[0].x,t.points[0].y);else switch(t.type){case a.VERTEX:let r=t.points[0];i.ctx.lineTo(r.x,r.y);break;case a.CURVE:let n=(i.settings.curveTightness-1)/6,o=i.vertexCache[e-3],s=i.vertexCache[e-2],l=i.vertexCache[e-1],c=i.vertexCache[e];if(2==e)break;0==e?i.ctx.moveTo(c.x,c.y):e<3?i.ctx.lineTo(c.x,c.y):(3==e&&i.ctx.lineTo(s.x,s.y),i.ctx.bezierCurveTo(l.x*n+s.x-o.x*n,l.y*n+s.y-o.y*n,-(c.x*n)+l.x+s.x*n,-(c.y*n)+l.y+s.y*n,l.x,l.y));break;case a.BEZIER:let u=t.points;i.ctx.bezierCurveTo(u[0].x,u[0].y,u[1].x,u[1].y,u[2].x,u[2].y);case a.SMOOTH:}}),t==a.CLOSE&&i.ctx.closePath(),i.ctx.fill(),i.ctx.stroke())},vertex:function(t,e){u({type:a.VERTEX,points:[{x:t,y:e}]})},curveVertex:function(t,e){u({type:a.CURVE,points:[{x:t,y:e}]})},bezierVertex:function(t,e,r,n,i,o){u({type:a.BEZIER,points:[{x:t,y:e},{x:r,y:n},{x:i,y:o}]})},bezier:function(t,e,r,n,i,a,o,s){beginShape(),vertex(t,e),bezierVertex(r,n,i,a,o,s),endShape()},curve:function(t,e,r,n,i,a,o,s){beginShape(),vertex(t,e),vertex(r,n),vertex(i,a),curveVertex(o,s),endShape()},bezierPoint:function(t,e,r,n,i){let a=1-i;return a*a*a*t+3*a*a*i*e+3*a*i*i*r+i*i*i*n},curvePoint:function(t,e,r,n,i){return .5*(2*e+(r-t)*i+(2*t-5*e+4*r-n)*i*i+(3*e-3*r+n-t)*i*i*i)},curveTangent:function(t,e,r,n,i){return .5*(r-t+2*(2*t-5*e+4*r-n)*i+3*(3*e-3*r+n-t)*i*i)},bezierTangent:function(t,e,r,n,i){let a=1-i;return 3*a*a*(e-t)+6*a*i*(r-e)+3*i*i*(n-r)},reloadFont:function(){i.ctx.font=i.settings.font.toString(),i.settings.genericTextMeasure=i.ctx.measureText("0"),i.settings.textHeight=i.settings.genericTextMeasure.fontBoundingBoxAscent+i.settings.genericTextMeasure.fontBoundingBoxDescent},textSize:function(t){i.settings.textSize=t,i.settings.font.size=t,i.reloadFont()},textAlign:function(t,e){switch(0==arguments.length&&(t=a.LEFT,e=a.BASELINE),1==arguments.length&&t==a.CENTER&&(e=a.CENTER),t){default:Dark.error(Error("Invalid x alignment type"));break;case a.LEFT:i.ctx.textAlign="left",i.settings.alignX=a.LEFT;break;case a.RIGHT:i.ctx.textAlign="right",i.settings.alignX=a.RIGHT;break;case a.CENTER:i.ctx.textAlign="center",i.settings.alignX=a.CENTER}switch(e){default:Dark.error(Error("Invalid y alignment type"));break;case a.BASELINE:i.ctx.textBaseline="alphabetic",i.settings.alignY=a.BASELINE;break;case a.TOP:i.ctx.textBaseline="top",i.settings.alignY=a.TOP;break;case a.BOTTOM:i.ctx.textBaseline="bottom",i.settings.alignY=a.BOTTOM;break;case a.CENTER:i.ctx.textBaseline="middle",i.settings.alignY=a.CENTER}},textFont:function(t){"string"==typeof t&&(t=new i.objects.DFont(t)),t instanceof i.objects.DFont?(i.settings.font=t,i.settings.textSize=t.size,i.reloadFont()):Dark.error(t+" is not a DFont.")},createFont:function(t){return DFont.parse(t)},textStyle:function(t){switch(t){default:i.settings.font.weight="normal",i.settings.font.style="normal";break;case a.BOLD:i.settings.font.weight="bold";break;case a.ITALIC:i.settings.font.style="italic"}i.reloadFont()},textWidth:function(t){return i.ctx.measureText(t).width},textAscent:function(){return i.settings.genericTextMeasure.fontBoundingBoxAscent},textDescent:function(){return i.settings.genericTextMeasure.fontBoundingBoxDescent},textLeading:function(t){i.settings.lineGap=t},text:function(t,e,r){let n=t.split("\n"),o=i.settings.alignY==a.CENTER?(i.settings.textHeight+i.settings.lineGap)*n.length/2:0;n.forEach((t,n)=>{let a=n*(i.settings.textHeight+i.settings.lineGap)-o;i.ctx.fillText(t,e,r+a),i.ctx.strokeText(t,e,r+a)})},get:function(...t){return 0==t.length?new DImage(i.ctx.getImageData(0,0,i.width,i.height),i.canvas):4==t.length?new DImage(i.ctx.getImageData(t[0],t[1],t[2],t[3]),i.canvas):void Dark.error(Error("get requires 0 or 4 parameters, not "+t.length))},set:function(t,e,r){i.ctx.save(),i.ctx.fillStyle=f(r),i.ctx.fillRect(t,e,1,1),i.ctx.restore()},image:function(t,e,r,n,o){switch(i.ctx.save(),i.settings.imageMode==a.CENTER&&i.ctx.translate(-n/2,-o/2),t instanceof ImageData&&(t=new DImage(t)),arguments.length){default:Dark.error(Error("image requires 3 to 5 parameters, not "+arguments.length));break;case 3:i.ctx.drawImage(t.canvas,e,r);break;case 4:i.ctx.drawImage(t.canvas,e,r,n,n);break;case 5:i.ctx.drawImage(t.canvas,e,r,n,o)}i.ctx.restore()},filter:function(t,e){let r=new DImage(i.ctx.getImageData(0,0,i.width,i.height),i);r.filter(t,e),i.ctx.putImageData(r.imageData,0,0)},loadImage:function(t){let e=new DImage,r=new Image;return r.crossOrigin="anonymous",r.src=t,r.onload=function(){r.width=10},e.source=r,e},min:(t,e)=>t<e?t:e,max:(t,e)=>t>e?t:e,log10:t=>Math.log10(t),log2:t=>Math.log2(t),log:t=>Math.log(t),logBase:(t,e)=>Math.log(t)/Math.log(e),mag:(t,e)=>Math.sqrt(t*t+e*e),norm:(t,e,r)=>(t-e)/(r-e),constrain:(t,e,r)=>Math.min(Math.max(t,e),r),between:(t,e,r)=>t<=r&&t>=e,exceeds:(t,e,r)=>t>r||t<e,lerp:(t,e,r)=>(e-t)*r+t,map:(t,e,r,n,i)=>n+(i-n)/(r-e)*(value-e),sq:t=>t*t,cb:t=>t*t*t,pow:(t,e)=>t**e,root:(t,e)=>t**(1/e),sqrt:t=>Math.sqrt(t),cbrt:t=>Math.cbrt(t),exp:t=>E**t,floor:t=>Math.floor(t),round:t=>Math.round(t),ceil:t=>Math.ceil(t),trunc:t=>Math.trunc(t),deci:t=>t-Math.trunc(t),abs:t=>t<0?-t:t,sign:t=>Math.sign(t),bsign:t=>t<0?-1:1,degrees:t=>180*t/a.PI,radians:t=>t*a.PI/180,millennium:()=>Math.floor(new Date().getFullYear()/1e3),century:()=>Math.floor(new Date().getFullYear()/100),decade:()=>Math.floor(new Date().getFullYear()/10),year:()=>new Date().getFullYear(),month:()=>new Date().getMonth(),day:()=>new Date().getDate(),hour:()=>new Date().getHours(),minute:()=>new Date().getMinutes(),second:()=>new Date().getSeconds(),millis:()=>Math.floor(performance.now()),micro:()=>Math.floor(1e3*performance.now()%1e3),nano:()=>Math.floor(1e6*performance.now()%1e3),today:()=>DAYS[new Date().getDay()],timezone:()=>-new Date().getTimezoneOffset()/60,sin:t=>Math.sin(c(t)),cos:t=>Math.cos(c(t)),tan:t=>Math.tan(c(t)),csc:t=>1/Math.sin(c(t)),sec:t=>1/Math.cos(c(t)),cot:t=>1/Math.tan(c(t)),atan2(t,e){var r;return r=Math.atan2(t,e),i.settings.angleMode==a.DEGREES?180*r/a.PI:r},asin:t=>Math.asin(c(t)),acos:t=>Math.acos(c(t)),atan:t=>Math.atan(c(t)),acsc:t=>Math.asin(1/c(t)),asec:t=>Math.acos(1/c(t)),acot:t=>Math.atan(1/c(t)),sinh:t=>Math.sinh(c(t)),cosh:t=>Math.cosh(c(t)),tanh:t=>Math.tanh(c(t)),csch:t=>1/Math.sinh(c(t)),sech:t=>1/Math.cosh(c(t)),coth:t=>1/Math.tanh(c(t)),asinh:t=>Math.asinh(c(t)),acosh:t=>Math.acosh(c(t)),atanh:t=>Math.atanh(c(t)),acsch:t=>Math.asinh(1/c(t)),asech:t=>Math.acosh(1/c(t)),acoth:t=>Math.atanh(1/c(t)),now:()=>performance.now(),reciprocal:t=>1/t,trim:t=>t.trim()}),i.raf=function(t){let a=(t=performance.now())-e,o=t-r;r=performance.now();let s=a>i.settings.frameStep-o/2&&i.settings.looping;n<t&&n>r&&(a=o=t-n),s&&(e=t,i.draw(),i.dt=a/1e3,i.fps=1e3/a,i.frameCount=++i.frameCount),i.isMain&&Dark.globallyUpdateVariables(i),requestAnimationFrame(i.raf)},i.dummy||(requestAnimationFrame(i.raf),i.frameRate(60),i.smooth(),i.ellipseMode(a.CENTER),i.rectMode(a.CORNER),i.imageMode(a.CORNER),i.angleMode(a.DEGREES),i.strokeCap(a.FLAT),i.strokeJoin(a.MITER),i.textAlign(a.LEFT,a.BASELINE),i.curveTightness(2),i.fill(255),i.stroke(0),i.strokeWeight(1),i.textFont("12px Arial"),i.textLeading(5),document.addEventListener("keydown",function(t){t.preventDefault(),i.keyIsPressed=!0,i.key=t.key,i.keyCode=t.keyCode,i.keyPressed()}),document.addEventListener("keyup",function(t){t.preventDefault(),i.keyIsPressed=!1,i.key=void 0,i.keyCode=void 0,i.keyReleased()}),document.addEventListener("keypress",function(t){t.preventDefault(),i.keyTyped()}),window.addEventListener("resize",function(t){t.preventDefault(),i.pageResized()}),document.addEventListener("visibilitychange",function(){"hidden"==document.visibilityState&&(n=performance.now())}),i.mouse=i.objects.DVector.zero2D(),i.pmouse=i.objects.DVector.zero2D(),i.settings.cursor="auto",i.settings.looping=!0)};Dark.instances=[],Dark.empties=["draw","keyPressed","keyReleased","keyTyped","mousePressed","mouseReleased","mouseMoved","mouseScrolled","mouseIn","mouseOut","mouseDoubleClicked","pageResized"],Dark.constants={DAYS:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],PI:Math.PI,HALF_PI:Math.PI/2,QUARTER_PI:Math.PI/4,E:Math.E,PHI:Math.PHI,TAU:2*Math.PI,ROUND:0,FLAT:1,DEGREES:2,RADIANS:3,VERTEX:4,CURVE:5,SMOOTH:6,BEZIER:7,CLOSE:8,OPEN:9,CENTER:10,CORNER:11,BOLD:12,ITALIC:13,NORMAL:14,BEVEL:15,MITER:16,SQUARE:17,LEFT:18,RIGHT:19,BASELINE:20,TOP:21,BOTTOM:22,GET:23,SET:24,PERLIN:25,SIMPLEX:26,WORLEY:27,VALUE:28,RANDOM:29,INVERT:30,OPAQUE:31,GRAY:32,ERODE:33,DILATE:34,THRESHOLD:35,POSTERIZE:36,BLUR:37,SHARPEN:38,SEPIA:39,OUTLINE:40,EMBOSS:41,EDGE:42,COTRAST:43,VIGNETTE:44,BRIGHTNESS:45,BLACK:46,WHITE:47,MEDIAN:48,BOX:49,OPACITY:50},Dark.filters=[Dark.constants.INVERT,Dark.constants.OPAQUE,Dark.constants.GRAY,Dark.constants.THRESHOLD,Dark.constants.POSTERIZE,Dark.constants.VIGNETTE,Dark.constants.BRIGHTNESS,Dark.constants.BLACK,Dark.constants.WHITE,Dark.constants.BOX,Dark.constants.OPACITY],Dark.special={16:"shift",10:"enter",8:"delete",32:"space",18:"option",17:"control",157:"command",38:"up",40:"down",37:"left",39:"right",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",20:"capslock",190:"period",188:"comma",191:"slash",220:"backslash",48:"zero",49:"one",50:"two",51:"three",52:"four",53:"five",54:"six",55:"seven",56:"eight",57:"nine",189:"minus",187:"equals",219:"left_bracket",221:"right_bracket",222:"single_quote",186:"semicolon"},Dark.cursors=["auto","default","none","context-menu","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","no-drop","not-allowed","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out"],Dark.ignoreGlobal=["empties","raf","vertices","transforms","settings","isMain","defaultCanvas","canvas","ctx"],Dark.variables={width:innerWidth,height:innerHeight,dt:0,frameCount:0,fps:60,key:void 0,keyCode:void 0,keyIsPressed:!1,mouseIsPressed:!1,mouseIsInside:!1,mouseX:0,mouseY:0,pmouseX:0,pmouseY:0,mouse:void 0,pmouse:void 0,mouseButton:void 0},Dark.mouseMap=["left","middle","right","back","forward"],Dark.changeable={},Dark.changeable.errorCount=0,Dark.maxErrorCount=50,Dark.maxTransforms=1e3,Dark.defaultContextSettings={willReadFrequently:!0},Dark.url=new URL(location.href),Dark.copy=function(t){if("object"!=typeof t&&"function"!=typeof t)return Dark.warn('"'+t+'" is not an object!'),t;{let e={};for(let r in t)e[r]=t[r];return"function"==typeof t&&0==Object.keys(e).length?t:e}},Dark.format=function(t){return"object"==typeof Dark.copy(t)&&("object"==typeof t||"function"==typeof t)?JSON.stringify(Dark.copy(t),null,"    "):t+""},Dark.doError=function(t,e){Dark.changeable.errorCount==Dark.maxErrorCount?console.warn("Too many warnings and errors have been made, the rest will not display."):Dark.changeable.errorCount<Dark.maxErrorCount&&console[t](e),Dark.changeable.errorCount++},Dark.warn=function(t){Dark.doError("warn",t)},Dark.error=function(t){Dark.doError("error",t)},Dark.observe=function(t,e,r){3==arguments.length&&e!=Dark.constants.GET&&e!=Dark.constants.SET&&Dark.error(Error("Invalid type, must be either GET or SET")),t=new Proxy(t,{get:function(t,n){return e==Dark.constants.GET&&r(n),t[n]},set:function(t,n,i){e==Dark.constants.SET&&r(n,i),t[n]=i}})},Dark.setMain=function(t){t instanceof Dark?(Dark.main&&(Dark.main.isMain=!1),Dark.main=t,t.isMain=!0):Dark.error(t+" is not an instance of Dark")},Dark.getMain=function(){return Dark.main},Dark.fileCacheKA={"/filters/global.vert":"# version 300 es precision lowp float; in vec2 pos; out vec2 uv; void main() { uv = (pos + 1.0) * 0.5; // Vertex position = -1 to 1, UV = 0 to 1 gl_Position = vec4(pos, 0.0, 1.0); }","/filters/invert.frag":"# version 300 es precision lowp float; uniform sampler2D sampler; in vec2 uv; out vec4 color; void main() { vec4 tex = texture(sampler, uv); color = vec4(1.0 - tex.r, 1.0 - tex.g, 1.0 - tex.b, tex.a); }","/filters/opaque.frag":"# version 300 es precision lowp float; uniform sampler2D sampler; in vec2 uv; out vec4 color; void main() { vec4 tex = texture(sampler, uv); color = vec4(tex.rgb, 1.0); }","/filters/grayscale.frag":"# version 300 es precision lowp float; uniform sampler2D sampler; in vec2 uv; out vec4 color; void main() { vec4 tex = texture(sampler, uv); float luminance = 0.2126 * tex.r + 0.7152 * tex.g + 0.0722 * tex.b; // Based on how human eyes precieve color = vec4(vec3(luminance), tex.a); }","/filters/threshold.frag":"# version 300 es precision lowp float; uniform sampler2D sampler; uniform float param; in vec2 uv; out vec4 color; void main() { vec4 tex = texture(sampler, uv); float luminance = 0.2126 * tex.r + 0.7152 * tex.g + 0.0722 * tex.b; // Same as grayscale if(luminance > param) { color = vec4(vec3(1.0), 1.0); } else { color = vec4(vec3(0.0), 1.0); } }","/filters/posterize.frag":"# version 300 es precision lowp float; uniform sampler2D sampler; uniform float param; in vec2 uv; out vec4 color; float posterize(float val) { return floor(val * param + 0.5) / param; } void main() { vec4 tex = texture(sampler, uv); float red = posterize(tex.r); float green = posterize(tex.g); float blue = posterize(tex.b); color = vec4(red, green, blue, 1.0); }","/filters/black.frag":"# version 300 es precision lowp float; uniform sampler2D sampler; uniform float param; in vec2 uv; out vec4 color; void main() { vec4 tex = texture(sampler, uv); float luminance = 0.2126 * tex.r + 0.7152 * tex.g + 0.0722 * tex.b; // Same as grayscale if(luminance <= param) { color = vec4(vec3(0.0), tex.a); } else { color = tex; } }","/filters/white.frag":"# version 300 es precision lowp float; uniform sampler2D sampler; uniform float param; in vec2 uv; out vec4 color; void main() { vec4 tex = texture(sampler, uv); float luminance = 0.2126 * tex.r + 0.7152 * tex.g + 0.0722 * tex.b; // Same as grayscale if(luminance >= param) { color = vec4(vec3(1.0), tex.a); } else { color = tex; } }","/filters/vignette.frag":"# version 300 es precision lowp float; uniform sampler2D sampler; uniform float param; in vec2 uv; out vec4 color; void main() { vec4 tex = texture(sampler, uv); vec2 pos = (uv * 2.0 - 1.0) * param; float dist = 1.0 - sqrt(pos.x * pos.x + pos.y * pos.y); color = vec4(tex.rgb * dist, tex.a); }","/filters/box.frag":"# version 300 es precision lowp float; uniform sampler2D sampler; uniform vec2 size; uniform float param; in vec2 uv; out vec4 color; #define len (param * 2.0 + 1.0) #define count (len * len) void main() { vec4 tex = texture(sampler, uv); vec4 total = vec4(0.0); for(float y = -param; y <= param; y++) { for(float x = -param; x <= param; x++) { total += texture(sampler, uv + vec2(x, y) / size); } } color = vec4(total / count); }","/filters/brightness.frag":"# version 300 es precision lowp float; uniform sampler2D sampler; uniform float param; in vec2 uv; out vec4 color; void main() { vec4 tex = texture(sampler, uv); color = vec4(tex.rgb + param, tex.a); }","/filters/opacity.frag":"# version 300 es precision lowp float; uniform sampler2D sampler; uniform float param; in vec2 uv; out vec4 color; void main() { vec4 tex = texture(sampler, uv); color = vec4(tex.rgb, tex.a + param); }"},Dark.compileListKA=[],Dark.loadFile=function(t){if("khanacademy.org"==Dark.url.host)return Dark.fileCacheKA[t];{"127.0.0.1:5500"!=Dark.url.host&&(t="https://cdn.jsdelivr.net/gh/99TheDark/Dark.js@latest"+t);let e=null,r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(),200==r.status&&(e=r.responseText),"127.0.0.1:5500"==Dark.url.host&&Dark.compileListKA.push({location:t,contents:e.replaceAll("\n"," ").replace(/\s\s+/g," ")}),e}},Dark.compileKA=function(){"127.0.0.1:5500"==Dark.url.host&&(Dark.compileListKA.forEach(t=>Dark.fileCacheKA[t.location]=t.contents),console.log(Dark.format(Dark.fileCacheKA)))},Dark.globallyUpdateVariables=function(t){for(let e in Dark.empties.forEach(function(e){window[e]&&(t[e]=window[e])}),t)if(!Dark.ignoreGlobal.includes(e)&&!Dark.empties.includes(e)){if("object"==typeof t[e])for(let r in t[e])window[r]=t[e][r];else window[e]=t[e]}},Dark.objects=function(){let t=function(t,e,r){3==arguments.length?(this.x=t,this.y=e,this.z=r,this.is2D=!1):2==arguments.length?(this.x=t,this.y=e,this.is2D=!0):Dark.error(Error("DVector requires 2 or 3 parameters, not "+arguments.length))};t.create=function(e,r,n){return new t(e,r,n)},t.zero2D=function(){return new t(0,0)},t.prototype.zero2D=function(){[this.x,this.y]=[0,0],this.z=void 0,this.is2D=!0},t.zero3D=function(){return new t(0,0,0)},t.prototype.zero3D=function(){[this.x,this.y,this.z]=[0,0,0]},t.add=function(e,r){return r instanceof t?e.is2D?new t(e.x+r.x,e.y+r.y):new t(e.x+r.x,e.y+r.y,e.z+r.z):e.is2D?new t(e.x+r,e.y+r):new t(e.x+r,e.y+r,e.z+r)},t.prototype.add=function(e){e instanceof t?(this.x+=e.x,this.y+=e.y,this.z+=e.z):(this.x+=e,this.y+=e,this.z+=e)},t.sub=function(e,r){return r instanceof t?e.is2D?new t(e.x-r.x,e.y-r.y):new t(e.x-r.x,e.y-r.y,e.z-r.z):e.is2D?new t(e.x-r,e.y-r):new t(e.x-r,e.y-r,e.z-r)},t.prototype.sub=function(e){e instanceof t?(this.x-=e.x,this.y-=e.y,this.z-=e.z):(this.x-=e,this.y-=e,this.z-=e)},t.mult=function(e,r){return r instanceof t?e.is2D?new t(e.x*r.x,e.y*r.y):new t(e.x*r.x,e.y*r.y,e.z*r.z):e.is2D?new t(e.x*r,e.y*r):new t(e.x*r,e.y*r,e.z*r)},t.prototype.mult=function(e){e instanceof t?(this.x*=e.x,this.y*=e.y,this.z*=e.z):(this.x*=e,this.y*=e,this.z*=e)},t.div=function(e,r){return r instanceof t?e.is2D?new t(e.x/r.x,e.y/r.y):new t(e.x/r.x,e.y/r.y,e.z/r.z):e.is2D?new t(e.x/r,e.y/r):new t(e.x/r,e.y/r,e.z/r)},t.prototype.div=function(e){e instanceof t?(this.x/=e.x,this.y/=e.y,this.z/=e.z):(this.x/=e,this.y/=e,this.z/=e)},t.pow=function(e,r){return r instanceof t?new t(e.x**r.x,e.y**r.y,e.z**r.z):new t(e.x**r,e.y**r,e.z**r)},t.prototype.pow=function(e){e instanceof t?(this.x**=e.x,this.y**=e.y,this.z**=e.z):(this.x**=e,this.y**=e,this.z**=e)},t.mag=function(t){return t.mag()},t.prototype.mag=function(){return this.is2D?Math.sqrt(this.x*this.x+this.y*this.y):Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.magSq=function(t){return t.magSq()},t.prototype.magSq=function(){return this.is2D?this.x*this.x+this.y*this.y:this.x*this.x+this.y*this.y+this.z*this.z},t.setMag=function(t,e){t.normalize(),t.mult(e)},t.prototype.setMag=function(t){this.normalize(),this.mult(t)},t.rotation=function(t){return atan2(t.y,t.x)},t.prototype.rotation=function(){return atan2(this.y,this.x)},t.setRotation=function(t,e){t.setRotation(e)},t.prototype.setRotation=function(t){let e=this.mag();[this.x,this.y]=[e*cos(t),e*sin(t)]},t.rotate=function(t,e){t.setRotation(t.rotation()+e)},t.prototype.rotate=function(t){this.setRotation(this.rotation()+t)},t.normalize=function(e){let r=e.mag();return 0!=r?t.div(e,r):e.get()},t.prototype.normalize=function(){let t=this.mag();0!=t&&this.div(t)},t.cross=function(e,r){return new t(e.y*r.z-r.y*e.z,e.z*r.x-r.z*e.x,e.x*r.y-r.x*e.y)},t.prototype.cross=function(t){return this.cross(t)},t.dot=function(t,e){return"number"==typeof e?t.is2D?t.x*e+t.y*e:t.x*e+t.y*e+t.z*e:t.is2D&&e.is2D?t.x*e.x+t.y*e.y:t.is2D||e.is2D?void Dark.error(Error("Cannot take the dot product of a 2D and 3D vector")):t.x*e.x+t.y*e.y+t.z*e.z},t.prototype.dot=function(e){return t.dot(this,e)},t.flip=function(t){return new Vector(-t.x,-t.y,-t.z)},t.prototype.flip=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},t.limit=function(t,e){return t.mag()>e&&t.mult(e/t.mag()),t},t.prototype.limit=function(){this.mag()>max&&this.mult(max/this.mag())},t.lerp=function(e,r,n){return new t(Dark.utils.lerp(e.x,r.x,n),Dark.utils.lerp(e.y,r.y,n),Dark.utils.lerp(e.z,r.z,n))},t.prototype.lerp=function(e,r){return t.lerp(this,e,r)},t.dist=function(t,e){let r,n,i=0;return t.is2D&&e.is2D?(r=e.x-t.x,n=e.y-t.y):t.is2D||e.is2D?Dark.error(Error("Cannot find the distance between a 2D and 3D DVector")):(r=e.x-t.x,n=e.y-t.y,i=e.z-t.z),Math.sqrt(r*r+n*n+i*i)},t.prototype.dist=function(e){return t.dist(this,e)},t.get=function(t){return t.get()},t.prototype.get=function(){return new t(this.x,this.y,this.z)},t.set=function(t,e){t.set(e)},t.prototype.set=function(t){Array.isArray(t)?[this.x,this.y,this.z]=t:[this.x,this.y,this.z]=[t.x,t.y,t.z],this.is2D&&(this.z=void 0)},t.toArray=function(t){return t.toArray()},t.prototype.toArray=function(){return this.is2D?[this.x,this.y]:[this.x,this.y,this.z]},t.fromArray=function(e){return t.create.apply(null,e)},t.prototype.fromArray=function(t){switch(t.length){default:Dark.error(Error("DVector.fromArray takes in an array of length 2 or 3, not "+t.length));break;case 2:[this.x,this.y]=t,this.z=void 0,this.is2D=!0;break;case 3:[this.x,this.y,this.z]=t,this.is2D=!1}},t.prototype.toString=function(){return this.is2D?"["+this.x+", "+this.y+"]":"["+this.x+", "+this.y+", "+this.z+"]"};let e=function(t){this.style="normal",this.variant="normal",this.weight="normal",this.size=16,this.family="Arial";let r=t.split(" ");for(let n in r){let i=r[n];switch(i){case"normal":break;case"italic":this.style="italic";break;case"bold":this.weight="bold"}if("italic"==i)this.style="italic";else if("small-caps"==i)this.variant="small-caps";else if(e.weights.includes(i))this.weight=i;else if("normal"!==i){let a=parseInt(i);isNaN(a)?this.family=i:this.size=a}}};e.parse=function(t){return new e(t)},e.prototype.toString=function(){return this.style+" "+this.weight+" "+this.variant+" "+this.size+"px "+this.family},e.weights=["bold","bolder","lighter","100","200","300","400","500","600","700","800","900"];let r=function(t,e){this.filters={},t instanceof ImageData?(this.imageData=t,this.source=e,this.width=t.width,this.height=t.height,this.canvas=new OffscreenCanvas(this.width,this.height),this.ctx=this.canvas.getContext("2d",Dark.defaultContextSettings),this.loadPixels()):(this.imageData=null,this.source=e,this.width=0,this.height=0)};r.get=function(t,...e){return t.get.apply(null,e)},r.prototype.get=function(...t){return 0==t.length?this.copy():4==t.length?new r(this.ctx.getImageData(t[0],t[1],t[2],t[3]),this.source):void Dark.error(Error("DImage.get requires 0 or 4 parameters, not "+t.length))},r.set=function(t,...e){t.set.apply(null,e)},r.prototype.set=function(t,e,r){let n=(t+e*this.width)*4;this.imageData.data[n]=Dark.utils.red(r),this.imageData.data[n+1]=Dark.utils.green(r),this.imageData.data[n+2]=Dark.utils.blue(r),this.imageData.data[n+3]=Dark.utils.alpha(r)},r.copy=function(t){return t.copy()},r.prototype.copy=function(){return new r(this.imageData,this.source)},r.prototype.loadPixels=function(){this.ctx.putImageData(this.imageData,0,0)},r.prototype.updatePixels=function(){this.imageData.data.set(this.ctx.getImageData(0,0,this.width,this.height).data)},r.prototype.filter=function(t,e){if(!Dark.filters.includes(t))return Dark.error(Error("Invalid filter type"));{let n=r.filterShaders[t],i=this.filters;if(i.gl_canvas=r.gl_canvas,i.gl=r.gl,[i.gl_canvas.width,i.gl_canvas.height]=[this.width,this.height],i.gl.viewport(0,0,this.width,this.height),!i.gl)return Dark.warn("Your browser does not support WebGL2.");if(i.vertexSource=r.globalVertexShader,i.fragmentSource=n.shader,i.vertexShader=i.gl.createShader(i.gl.VERTEX_SHADER),i.fragmentShader=i.gl.createShader(i.gl.FRAGMENT_SHADER),i.gl.shaderSource(i.vertexShader,i.vertexSource),i.gl.shaderSource(i.fragmentShader,i.fragmentSource),i.gl.compileShader(i.vertexShader),i.gl.compileShader(i.fragmentShader),!i.gl.getShaderParameter(i.vertexShader,i.gl.COMPILE_STATUS))return Dark.error(Error("Error compiling vertex shader.\n\n"+i.gl.getShaderInfoLog(i.vertexShader)));if(!i.gl.getShaderParameter(i.fragmentShader,i.gl.COMPILE_STATUS))return Dark.error(Error("Error compiling fragment shader.\n\n"+i.gl.getShaderInfoLog(i.fragmentShader)));if(i.program=i.gl.createProgram(),i.gl.attachShader(i.program,i.vertexShader),i.gl.attachShader(i.program,i.fragmentShader),i.gl.linkProgram(i.program),!i.gl.getProgramParameter(i.program,i.gl.LINK_STATUS))return Dark.error(Error("Error linking program.\n\n"+i.gl.getProgramInfoLog(i.program)));if(i.gl.validateProgram(i.program),!i.gl.getProgramParameter(i.program,i.gl.VALIDATE_STATUS))return Dark.error(Error("Error validating program.\n\n"+i.gl.getProgramInfoLog(i.program)));i.gl.useProgram(i.program),i.tris=i.gl.createBuffer(),i.gl.bindBuffer(i.gl.ARRAY_BUFFER,i.tris),i.gl.bufferData(i.gl.ARRAY_BUFFER,r.texUV,i.gl.STATIC_DRAW),i.fs=Float32Array.BYTES_PER_ELEMENT,i.posAttribLocation=i.gl.getAttribLocation(i.program,"pos"),i.gl.vertexAttribPointer(i.posAttribLocation,2,i.gl.FLOAT,i.gl.FALSE,2*i.fs,0),i.gl.enableVertexAttribArray(i.posAttribLocation),i.sizeUniformLocation=i.gl.getUniformLocation(i.program,"size"),i.gl.uniform2f(i.sizeUniformLocation,this.width,this.height),n.param&&(e=void 0!=e?Dark.utils.constrain(e,n.param.min,n.param.max):n.param.default,i.paramUniformLocation=i.gl.getUniformLocation(i.program,"param"),i.gl.uniform1f(i.paramUniformLocation,e)),i.texture=i.gl.createTexture(),i.gl.bindTexture(i.gl.TEXTURE_2D,i.texture),i.gl.texParameteri(i.gl.TEXTURE_2D,i.gl.TEXTURE_WRAP_S,i.gl.CLAMP_TO_EDGE),i.gl.texParameteri(i.gl.TEXTURE_2D,i.gl.TEXTURE_WRAP_T,i.gl.CLAMP_TO_EDGE),i.gl.texParameteri(i.gl.TEXTURE_2D,i.gl.TEXTURE_MIN_FILTER,i.gl.LINEAR),i.gl.texParameteri(i.gl.TEXTURE_2D,i.gl.TEXTURE_MAG_FILTER,i.gl.LINEAR),i.gl.texImage2D(i.gl.TEXTURE_2D,0,i.gl.RGBA,i.gl.RGBA,i.gl.UNSIGNED_BYTE,this.imageData),i.gl.bindTexture(i.gl.TEXTURE_2D,null),i.gl.bindTexture(i.gl.TEXTURE_2D,i.texture),i.gl.activeTexture(i.gl.TEXTURE0),i.gl.drawArrays(i.gl.TRIANGLES,0,6);let a=new Uint8ClampedArray(this.width*this.height*4);i.gl.bindFramebuffer(i.gl.FRAMEBUFFER,null),i.gl.readPixels(0,0,this.width,this.height,i.gl.RGBA,i.gl.UNSIGNED_BYTE,a),this.imageData.data.set(a),this.ctx.putImageData(this.imageData,0,0)}},r.texUV=new Float32Array([-1,-1,1,-1,-1,1,1,1,1,-1,-1,1]),r.globalVertexShader=Dark.loadFile("/filters/global.vert"),r.filterShaders=[],r.initializeShaders=function(t){t.forEach(function(t){r.filterShaders[t.key]={shader:Dark.loadFile("/filters/"+t.shader+".frag"),param:t.param}})},r.initializeShaders([{key:Dark.constants.INVERT,shader:"invert"},{key:Dark.constants.OPAQUE,shader:"opaque"},{key:Dark.constants.GRAY,shader:"grayscale"},{key:Dark.constants.THRESHOLD,shader:"threshold",param:{min:0,max:1,default:.5}},{key:Dark.constants.POSTERIZE,shader:"posterize",param:{min:2,max:255,default:255}},{key:Dark.constants.BRIGHTNESS,shader:"brightness",param:{min:-1,max:1,default:0}},{key:Dark.constants.BLACK,shader:"black",param:{min:0,max:1,default:0}},{key:Dark.constants.WHITE,shader:"white",param:{min:0,max:1,default:1}},{key:Dark.constants.VIGNETTE,shader:"vignette",param:{min:0,max:1,default:0}},{key:Dark.constants.BOX,shader:"box",param:{min:0,max:30,default:0}},{key:Dark.constants.OPACITY,shader:"opacity",param:{min:0,max:1,default:0}}]),r.gl_canvas=new OffscreenCanvas(100,60),r.gl=r.gl_canvas.getContext("webgl2");let n=function(t,e,r=0){t instanceof n?(this.width=t.width,this.height=t.height,this.mat=Array(this.height).fill(null).map(()=>Array(this.width).fill(0)),this.set(t)):Array.isArray(t)?(Array.isArray(t[0])?(this.width=t[0].length,this.height=t.length):(this.width=e,this.height=r),this.mat=Array(this.height).fill(null).map(()=>Array(this.width).fill(0)),this.set(t)):(this.width=t,this.height=e,this.mat=Array(e).fill(null).map(()=>Array(t).fill(r)))};return n.prototype.get=function(t,e){return this.mat[e][t]},n.set=function(t,e,r,n){t.set(e,r,n)},n.prototype.set=function(t,e,r){if(t instanceof n)for(let i=0;i<t.height;i++)for(let a=0;a<t.width;a++)this.mat[i][a]=t.mat[i][a];else if(Array.isArray(t)){if(Array.isArray(t[0]))for(let o=0;o<t.length;o++)for(let s=0;s<t[0].length;s++)this.mat[o][s]=t[o][s];else for(let l=0;l<this.width*this.height;l++){let c=l%this.width,u=Math.floor(l/this.width);this.mat[u][c]=t[l]}}else this.mat[e][t]=r},n.dot=function(t,e,r,n){if(t.width==e.height){let i=0;for(let a=0;a<t.width;a++)i+=t.get(a,r)*e.get(n,a);return i}Dark.error(Error("Can only take the dot product of two DMatrices  with equal width and height"))},n.prototype.dot=function(t){return n.dot(this,t)},n.identity=function(t){let e=new n(t,t);for(let r=0;r<t;r++)e.set(r,r,1);return e},n.prototype.identity=function(){this.width==this.height?this.mat=n.identity(this.width).mat:Dark.error(Error("Only DMatrices with square dimensions have identity DMatrices"))},n.add=function(t,e){if("number"==typeof e){let r=new n(t.width,t.height);for(let i=0;i<r.height;i++)for(let a=0;a<r.width;a++)r.set(i,a,t.get(a,i)+e);return r}if(t.width==e.width&&t.height==e.height){let o=new n(t.width,t.height);for(let s=0;s<o.height;s++)for(let l=0;l<o.width;l++)o.set(s,l,t.get(l,s)+e.get(l,s));return o}Dark.error(Error("Cannot add two DMatrices with different dimensions"))},n.prototype.add=function(t){this.set(n.add(this,t))},n.sub=function(t,e){if("number"==typeof e){let r=new n(t.width,t.height);for(let i=0;i<r.height;i++)for(let a=0;a<r.width;a++)r.set(i,a,t.get(a,i)-e);return r}if(t.width==e.width&&t.height==e.height){let o=new n(t.width,t.height);for(let s=0;s<o.height;s++)for(let l=0;l<o.width;l++)o.set(s,l,t.get(l,s)-e.get(l,s));return o}Dark.error(Error("Cannot subtract two DMatrices with different dimensions"))},n.prototype.sub=function(t){this.set(n.sub(this,t))},n.mult=function(t,e){if("number"==typeof e){let r=new n(t.width,t.height);for(let i=0;i<r.height;i++)for(let a=0;a<r.width;a++)r.set(i,a,t.get(a,i)*e);return r}if(t.width==e.height){let o=new n(e.width,t.height);for(let s=0;s<o.height;s++)for(let l=0;l<o.width;l++)o.set(l,s,n.dot(t,e,s,l));return o}Dark.error(Error("Can only multiply two DMatrices with equal width and height"))},n.prototype.mult=function(t){let e=n.mult(this,t);this.width=e.width,this.height=e.height,this.mat=e.mat},n.prototype.copy=function(){return new n([...this.mat])},n.prototype.toArray=function(){return[...this.mat]},n.prototype.toString=function(){let t="";for(let e in this.mat){for(let r in this.mat[e])t+=this.mat[e][r]+" ";t=t.replace(/ $/,"\n")}return t},{DVector:t,DFont:e,DImage:r,DMatrix:n}}(),Dark.compileKA(),Dark.utils=new Dark(!0),Dark.setMain(new Dark),Dark.globallyUpdateVariables(Dark.main),Object.freeze(Dark);
